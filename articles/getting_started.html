<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="PDSdatabase">
<title>Getting Started • PDSdatabase</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="PDSdatabase">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">PDSdatabase</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Seedlings</h6>
    <a class="dropdown-item" href="../articles/drugs_and_classes.html">Drugs and Drug Classes</a>
    <a class="dropdown-item" href="../articles/events_and_classes.html">Adverse Events and Classes</a>
    <a class="dropdown-item" href="../articles/top_ade_model.html">Most likely ADE at child develpment stages</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ngiangre/PDSdatabase/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="getting_started_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting Started</h1>
                        <h4 data-toc-skip class="author">Nick Giangreco</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ngiangre/PDSdatabase/blob/HEAD/vignettes/getting_started.Rmd" class="external-link"><code>vignettes/getting_started.Rmd</code></a></small>
      <div class="d-none name"><code>getting_started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="pdsdatabase">PDSdatabase<a class="anchor" aria-label="anchor" href="#pdsdatabase"></a>
</h2>
<p>The main thesis behind this published resource is that children have adverse events after drug exposure not just from the disease process but also from the biological processes from their growth and development. The National Institute of Child and Human Development defines 7 stages of child development for which we estimate signals: term neonate (0-27 days), infancy (28 days-1 years), toddler (1 year-2 years), early childhood (2-5 years), middle childhood (6-11 years), early adolescence 12-17 years, and late adolescence (18-21 years). The database contains tables of drug safety signals with drug, adverse event, and biological ontologies to facilitate teasing apart influences and contributions adverse drug events during childhood.</p>
<div class="section level3">
<h3 id="an-example">An example<a class="anchor" aria-label="anchor" href="#an-example"></a>
</h3>
<p>The package helps with identifying, retrieving, and loading the database.</p>
<p>Retrieve the database:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ngiangre/PDSdatabase" class="external-link">PDSdatabase</a></span><span class="op">)</span>
<span class="fu"><a href="../reference/download_sqlite_db.html">download_sqlite_db</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#downloads to current working directory</span></code></pre></div>
<p>Connect to the database:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_sqlite_db.html">connect_sqlite_db</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Do something:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html" class="external-link">p_load</a></span><span class="op">(</span><span class="va">tidyverse</span>,<span class="va">DBI</span><span class="op">)</span>

<span class="va">drug_</span> <span class="op">&lt;-</span> <span class="st">"montelukast; oral"</span>
<span class="va">event_</span> <span class="op">&lt;-</span> <span class="st">"Nightmare"</span>

<span class="va">theme_big</span> <span class="op">&lt;-</span> 
  <span class="fu">theme_classic</span><span class="op">(</span>base_size<span class="op">=</span><span class="fl">16</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">theme</span><span class="op">(</span>
    strip.text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color<span class="op">=</span><span class="st">"black"</span>,face<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span>,
    strip.background <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
    axis.title.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
    axis.line <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
    axis.ticks <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
    axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color<span class="op">=</span><span class="st">"black"</span>,face<span class="op">=</span><span class="st">"bold"</span>,
                               angle<span class="op">=</span><span class="fl">45</span>,vjust<span class="op">=</span><span class="fl">1</span>,hjust<span class="op">=</span><span class="fl">1</span><span class="op">)</span>,
    axis.text.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,
    axis.title.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color<span class="op">=</span><span class="st">"black"</span>,face<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span>,
    legend.position <span class="op">=</span> <span class="st">"top"</span>,
    legend.text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color<span class="op">=</span><span class="st">"black"</span>,face<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span>,
    legend.key.size <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">0.4</span>,<span class="st">"cm"</span><span class="op">)</span>,
    legend.box.margin <span class="op">=</span> <span class="fu">margin</span><span class="op">(</span><span class="op">-</span><span class="fl">0.4</span>,<span class="op">-</span><span class="fl">0.4</span>,<span class="fl">0</span>,<span class="op">-</span><span class="fl">0.4</span>,unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span>
  <span class="op">)</span>

<span class="va">stages</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"term_neonatal"</span>,<span class="st">"infancy"</span>,
    <span class="st">"toddler"</span>,<span class="st">"early_childhood"</span>,
    <span class="st">"middle_childhood"</span>,<span class="st">"early_adolescence"</span>,
    <span class="st">"late_adolescence"</span><span class="op">)</span>
<span class="va">stages_split</span> <span class="op">&lt;-</span> <span class="fu">str_replace</span><span class="op">(</span><span class="va">stages</span>,<span class="st">"_"</span>,<span class="st">"\n"</span><span class="op">)</span>

<span class="va">plot_ade_risks</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,<span class="va">color</span><span class="op">=</span><span class="st">"red"</span>,<span class="va">theme</span><span class="op">=</span><span class="va">theme_big</span>,<span class="va">ts</span><span class="op">=</span><span class="fl">5</span><span class="op">)</span><span class="op">{</span>
  <span class="va">x</span><span class="op">$</span><span class="va">nichd_split</span> <span class="op">&lt;-</span> <span class="fu">str_replace</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">nichd</span>,<span class="st">"_"</span>,<span class="st">"\n"</span><span class="op">)</span>
  <span class="va">x</span><span class="op">$</span><span class="va">NICHD</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">nichd_split</span>,levels<span class="op">=</span><span class="fu">str_replace</span><span class="op">(</span><span class="va">stages</span>,<span class="st">"_"</span>,<span class="st">"\n"</span><span class="op">)</span><span class="op">)</span>
  <span class="va">x</span> <span class="op">%&gt;%</span> 
    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">nichd_split</span>,levels<span class="op">=</span><span class="va">stages_split</span><span class="op">)</span>,<span class="va">gam_score</span>,group<span class="op">=</span><span class="va">ade</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_bar</span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span>,<span class="fu">aes</span><span class="op">(</span>y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">DE</span><span class="op">)</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>,fill<span class="op">=</span><span class="st">"lightgray"</span>,color<span class="op">=</span><span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggrepel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html" class="external-link">geom_label_repel</a></span><span class="op">(</span>
      <span class="fu">aes</span><span class="op">(</span>
        label<span class="op">=</span><span class="va">DE</span>,
        y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">DE</span><span class="op">)</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span>
      <span class="op">)</span>,
      vjust<span class="op">=</span><span class="fl">1.3</span>,fontface<span class="op">=</span><span class="st">"bold"</span>,size<span class="op">=</span><span class="va">ts</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_point</span><span class="op">(</span>color<span class="op">=</span><span class="va">color</span>,size<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_errorbar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>ymin<span class="op">=</span><span class="va">gam_score_90mse</span>,ymax<span class="op">=</span><span class="va">gam_score_90pse</span><span class="op">)</span>,
                  width<span class="op">=</span><span class="fl">0.1</span>,color<span class="op">=</span><span class="va">color</span>,size<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_hline</span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>,color<span class="op">=</span><span class="st">"black"</span>,size<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">ade_name</span>,labeller <span class="op">=</span> <span class="fu">label_wrap_gen</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">xlab</span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ylab</span><span class="op">(</span><span class="st">"Risk of ADE (GAM log odds)"</span><span class="op">)</span> <span class="op">+</span> 
    <span class="va">theme</span> <span class="op">+</span>
    <span class="fu">theme</span><span class="op">(</span>
      axis.line <span class="op">=</span> <span class="fu">element_line</span><span class="op">(</span><span class="op">)</span>,
      axis.ticks <span class="op">=</span> <span class="fu">element_line</span><span class="op">(</span><span class="op">)</span>,
      axis.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color<span class="op">=</span><span class="st">"black"</span>,face<span class="op">=</span><span class="st">"bold"</span>,size<span class="op">=</span><span class="fl">12</span><span class="op">)</span>
    <span class="op">)</span>
  
<span class="op">}</span>

<span class="fu">tbl</span><span class="op">(</span><span class="va">con</span>,<span class="st">"ade_nichd"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ade_name</span><span class="op">==</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">drug_</span>,<span class="st">" and "</span>,<span class="va">event_</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu">collect</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu">plot_ade_risks</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="getting_started_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>The labelled numbers are the number of observed drug reports with the adverse event. The red bars and intervals are the estimated signal of the drug exposure’s effect on the occurrence of an adverse event at that child development stage. In this context, risk and signal estimate are synonymous - we use a risk model to generate drug safety signals.</p>
<p>Disconnect database:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/disconnect_sqlite_db.html">disconnect_sqlite_db</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></code></pre></div>
<p>There is so much that can be done with this and the other data found in this database. Stay tuned for more vignettes!</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Nicholas Giangreco.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
